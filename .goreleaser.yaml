# Customization options: https://goreleaser.com/customization/
version: 2
project_name: locksmith
before:
  hooks:
    - go mod tidy
    - go generate ./...
builds:
  - no_unique_dist_dir: false
    env:
      - CGO_ENABLED=0
    goos:
      - linux
      # - darwin
      # - windows
    goarch:
      - amd64
      # - arm64
    ldflags:
      - -s -w
      - -X go.szostok.io/version.version={{.Version}}
      - -X go.szostok.io/version.buildDate={{.Date}}
checksum:
  name_template: '{{ .ProjectName }}_checksums.txt'
  algorithm: sha512
changelog:
  sort: asc
dockers_v2:
  - images:
      - "ghcr.io/insightsengineering/{{ .ProjectName }}"
    tags:
      - "latest"
      - "{{ .Version }}"
    labels:
      "org.opencontainers.image.created": "{{ .Date }}"
      "org.opencontainers.image.title": "{{ .ProjectName }}"
      "org.opencontainers.image.revision": "{{ .FullCommit }}"
      "org.opencontainers.image.version": "{{ .Version }}"
